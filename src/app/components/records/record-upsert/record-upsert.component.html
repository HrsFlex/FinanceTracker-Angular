<form [formGroup]="recordForm" (ngSubmit)="submitForm()">
  <div class="form-group">
    <label for="type">Transaction Type</label>
    <select id="type" formControlName="type" class="form-control">
      <option *ngFor="let type of transactionTypes" [value]="type">
        {{ type | titlecase }}
      </option>
    </select>
    <div
      *ngIf="recordForm.get('type')?.touched && recordForm.get('type')?.invalid"
      class="error"
    >
      Transaction type is required.
    </div>
  </div>

  <div class="form-group">
    <label for="fromAccountId">From Account</label>
    <select
      id="fromAccountId"
      formControlName="fromAccountId"
      class="form-control"
    >
      <option value="">Select Account</option>
      <option *ngFor="let account of accounts" [value]="account.id">
        {{ account.name }}
      </option>
    </select>
    <div
      *ngIf="
        recordForm.get('fromAccountId')?.touched &&
        recordForm.get('fromAccountId')?.invalid
      "
      class="error"
    >
      From account is required.
    </div>
  </div>

  <div class="form-group" *ngIf="recordForm.get('type')?.value === 'transfer'">
    <label for="toAccountId">To Account</label>
    <select id="toAccountId" formControlName="toAccountId" class="form-control">
      <option value="">Select Account</option>
      <option *ngFor="let account of accounts" [value]="account.id">
        {{ account.name }}
      </option>
    </select>
    <div
      *ngIf="
        recordForm.get('toAccountId')?.touched &&
        recordForm.get('toAccountId')?.invalid
      "
      class="error"
    >
      To account is required for transfers.
    </div>
  </div>

  <div class="form-group" *ngIf="recordForm.get('type')?.value !== 'transfer'">
    <label for="categoryId">Category</label>
    <select id="categoryId" formControlName="categoryId" class="form-control">
      <option value="">Select Category</option>
      <option *ngFor="let category of categories" [value]="category.id">
        {{ category.name }}
      </option>
    </select>
    <div
      *ngIf="
        recordForm.get('categoryId')?.touched &&
        recordForm.get('categoryId')?.invalid
      "
      class="error"
    >
      Category is required.
    </div>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <input
      id="description"
      formControlName="description"
      class="form-control"
    />
  </div>

  <div class="form-group">
    <label for="amount">Amount</label>
    <input
      id="amount"
      type="number"
      formControlName="amount"
      class="form-control"
    />
    <div
      *ngIf="
        recordForm.get('amount')?.touched && recordForm.get('amount')?.invalid
      "
      class="error"
    >
      Amount must be a positive number.
    </div>
  </div>

  <div class="form-group">
    <label for="date">Date</label>
    <input id="date" type="date" formControlName="date" class="form-control" />
    <div
      *ngIf="recordForm.get('date')?.touched && recordForm.get('date')?.invalid"
      class="error"
    >
      Date is required.
    </div>
  </div>

  <button type="submit" [disabled]="recordForm.invalid" class="submit-btn">
    Save Record
  </button>
</form>
